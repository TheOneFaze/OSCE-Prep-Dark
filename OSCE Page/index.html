<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSCE Spark</title>

    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="manifest" href="/OSCE-Prep-Dark/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script>
        // Check if the user is NOT authenticated for the current session.
        // This must run before any content is rendered to prevent flicker.
        if (sessionStorage.getItem('isAuthenticated') !== 'true') {
            // Redirect to the login page.
            // Ensure this path is correct relative to the root of your GitHub Pages site.
            window.location.href = '/OSCE-Prep-Dark/OSCE%20Page/login.html';
        }
        // The 'isAuthenticated' flag will persist in sessionStorage until the tab/PWA is closed.
    </script>

    <style>
/* --- MASTER INLINE STYLES --- */

/* --- 0. Base HTML and Body Setup (Crucial for full background) --- */
html, body {
    height: 100%; /* Ensure both html and body take full height of the viewport */
    margin: 0;
    padding: 0; /* Remove default browser padding/margin */
    overflow-x: hidden; /* Prevent horizontal scrollbar from overflow */
}

/* --- 1. Main Site Layout & Structure --- */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f4f9; /* Default light background */
    color: #333; /* Default light text color */
    transition: background-color 0.3s, color 0.3s;
}

.header-container { /* This div wraps the logo, header text, and search bar */
    text-align: center;
    margin-bottom: 40px;
    padding: 25px 10px;
    font-size: 1.8em;
    font-weight: bold;
    color: white; /* Header text color in light mode (default) */
    background: linear-gradient(to right, #42a5f5, #0d47a1); /* Default blue theme gradient for header */
    position: relative; /* Needed for absolute positioning of search bar */
    box-sizing: border-box; /* Include padding in width */
    display: flex; /* Use flexbox to align items in header */
    justify-content: space-between; /* Pushes items to ends */
    align-items: center; /* Vertically center items */
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
}

.header-logo { /* New class for the logo wrapper */
    flex-shrink: 0; /* Prevent logo from shrinking */
    padding-right: 20px; /* Space from title/search */
}

.header-title { /* For the actual "OSCE SPARK" text */
    flex-grow: 1; /* Allows it to take available space */
    text-align: center;
    color: white; /* Ensure it's white in all light themes for contrast */
}

.logo {
    max-width: 100%;
    height: auto;
    max-height: 80px;
}

/* Search Bar Styling */
.search-container {
    position: relative;
    width: 250px; /* Fixed width for the search bar */
    order: 2; /* Place it after the logo and title in flex order */
    margin-left: auto; /* Push to the right */
    margin-right: 20px; /* Add some margin from the edge */
    flex-shrink: 0; /* Prevent search from shrinking */
}

.search-input-wrapper {
    position: relative;
    width: 100%;
}

#searchInput {
    width: 100%;
    padding: 10px 15px;
    border: 2px solid #42a5f5; /* Theme blue border */
    border-radius: 25px; /* Pill shape */
    font-size: 1em;
    outline: none;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    background-color: #ffffff; /* White background */
    color: #333;
    box-sizing: border-box; /* Include padding/border in width */
}

#searchInput:focus {
    border-color: #0d47a1; /* Darker blue on focus */
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

/* Search Results Container for Cards */
#searchResults {
    display: none; /* Hidden by default */
    flex-wrap: wrap; /* Allow cards to wrap */
    justify-content: center;
    gap: 25px;
    padding: 40px 20px; /* Same padding as main container */
    box-sizing: border-box;
    max-width: 1200px; /* Limit max width of results container */
    margin: 0 auto; /* Center the results container */
}

#searchResults .card { /* Apply existing card styling to search results */
    background-color: #ffffff;
    padding: 20px;
    width: 280px;
    min-height: 80px;
    text-align: center;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s;
    display: flex; /* Ensure flex for alignment within card */
    align-items: center;
    justify-content: center;
    border-left: 5px solid transparent; /* For theme color accent */
    font-size: 1.1rem; /* Match main cards */
    font-weight: 600; /* Match main cards */
}

#searchResults .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

#searchResults .card a {
    text-decoration: none;
    color: #333; /* Default link color in light mode */
    display: block; /* Make the whole card clickable */
    width: 100%;
}

#searchResults p.no-results {
    text-align: center;
    color: #666;
    padding: 20px;
    width: 100%; /* Take full width of results container */
}


.container { /* For the main index page cards */
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
    padding: 40px 20px; /* Padding for the main card container */
    box-sizing: border-box; /* Include padding in width/height calculation */
}

.card { /* For individual cards on the index page */
    background-color: #ffffff;
    padding: 20px;
    width: 280px;
    min-height: 80px;
    text-align: center;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    border-left: 5px solid transparent; /* For theme color accent */
}

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }

a {
    text-decoration: none;
    color: #333; /* Default link color in light mode */
    font-weight: 600;
    font-size: 1.1rem;
    transition: color 0.3s;
}

footer {
    margin-top: 50px;
    text-align: center;
    font-size: 14px;
    color: #777; /* Default footer text color in light mode */
    padding: 20px;
    width: 100%;
    display: flex; /* Use flexbox for footer content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    flex-wrap: wrap; /* Allow wrapping on small screens */
    gap: 10px; /* Space between items */
}

/* Dark Mode Toggle Slider Styles */
.theme-switch-wrapper {
    display: flex;
    align-items: center;
    justify-content: center; /* Center the switch within its wrapper */
    margin-bottom: 0; /* Remove previous margin */
}

.theme-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
}

.theme-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc; /* Grey when off in light mode */
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 34px; /* Rounded slider */
}

.slider:before {
    position: absolute;
    content: "";
    height: 26px; /* Slightly larger for round effect */
    width: 26px; /* Slightly larger for round effect */
    left: 4px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 50%;
}

/* This rule applies when the input is checked (dark mode active) */
input:checked + .slider {
    background-color: #03a9f4; /* Blue when checked (dark mode)*/
}

input:focus + .slider {
    box-shadow: 0 0 1px #03a9f4; /* Match the checked background color */
}

input:checked + .slider:before {
    -webkit-transform: translateX(26px);
    -ms-transform: translateX(26px);
    transform: translateX(26px);
    /* The circle itself remains white as it provides good contrast */
}

/* Optional: Styling for the slider's "off" state when the body is in dark mode
   to make it visually consistent with the dark theme when the switch is off. */
body.dark-mode .theme-switch input:not(:checked) + .slider {
    background-color: #555; /* A darker grey for "off" in dark mode, more subtle */
}


/* --- 2. Color Themes for LIGHT Mode --- */
/* These define the specific colors for each station type when in LIGHT mode */

/* Blue Theme (Diagnosis) - Default for homepage */
.theme-blue .header-container {
    background: linear-gradient(to right, #42a5f5, #0d47a1);
}

/* Card border colors for light mode - these are used by the search results cards too */
.card.history-taking, #searchResults .card.history-taking { border-color: #f06292; } /* Pink-like for History */
.card.diagnosis, #searchResults .card.diagnosis { border-color: #29b6f6; } /* Blue for Diagnosis */
.card.medication, #searchResults .card.medication { border-color: #66bb6a; } /* Green for Medication */
.card.procedure, #searchResults .card.procedure { border-color: #ffa726; } /* Orange for Procedure */
.card.post-procedure, #searchResults .card.post-procedure { border-color: #ab47bc; } /* Purple for Post-Procedure */
.card.surgery, #searchResults .card.surgery { border-color: #ef5350; } /* Red for Surgery */
.card.community, #searchResults .card.community { border-color: #ff7043; } /* Terracotta for Community */


/* --- 3. Dark Mode Styles --- */
body.dark-mode {
    background: #1f2023;
    color: #e0e0e0;
}

.dark-mode .card, .dark-mode #searchResults .card { /* Apply to both main and search cards */
    background-color: #2f3136;
    box-shadow: 0 6px 18px rgba(0,0,0,0.4);
}

.dark-mode .card a, .dark-mode #searchResults .card a { /* Apply to both main and search card links */
    color: #e0e0e0;
}

.dark-mode footer {
    color: #999;
}

/* Dark Mode Header */
.dark-mode .header-container {
    background: linear-gradient(to right, #0d47a1, #1a237e); /* Darker blue gradient */
}
.dark-mode .header-title {
    color: white;
}


/* Dark Mode Search Bar Styling */
.dark-mode .search-container #searchInput {
    border-color: #82b1ff; /* Lighter blue for dark mode */
    background-color: #3f4147; /* Darker background */
    color: #e0e0e0;
}

.dark-mode .search-container #searchInput:focus {
    border-color: #42a5f5; /* Theme blue on focus */
}

.dark-mode #searchResults {
    background-color: #3f4147;
    border-color: #82b1ff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4); /* Darker shadow */
}

.dark-mode #searchResults li:hover {
    background-color: #2a2c30; /* Even darker hover for dark mode */
}

.dark-mode #searchResults li a {
    color: #82b1ff; /* Lighter blue for links in dark mode results */
}

.dark-mode #searchResults p.no-results {
    color: #999;
}

/* Dark Mode Card Borders for Search Results and Main Cards */
.dark-mode .card.history-taking, .dark-mode #searchResults .card.history-taking { border-color: #f48fb1; }
.dark-mode .card.diagnosis, .dark-mode #searchResults .card.diagnosis { border-color: #82b1ff; }
.dark-mode .card.medication, .dark-mode #searchResults .card.medication { border-color: #a5d6a7; }
.dark-mode .card.procedure, .dark-mode #searchResults .card.procedure { border-color: #ffcc80; }
.dark-mode .card.post-procedure, .dark-mode #searchResults .card.post-procedure { border-color: #e1bee7; }
.dark-mode .card.surgery, .dark-mode #searchResults .card.surgery { border-color: #ff8a80; }
.dark-mode .card.community, .dark-mode #searchResults .card.community { border-color: #ffccbc; }


/* --- 4. Media Queries for Mobile-Friendly Layout --- */
@media screen and (max-width: 768px) {
    .header-container {
        flex-direction: column; /* Stack logo, title, search vertically */
        align-items: center; /* Center items when stacked */
        padding-top: 15px; /* Adjust header padding */
        padding-bottom: 15px;
        justify-content: center; /* Center content horizontally */
    }

    .header-logo {
        padding-right: 0; /* Remove right padding */
        margin-bottom: 10px; /* Space between logo and title */
    }

    .header-title {
        margin-bottom: 15px; /* Space between title and search */
        flex-grow: 0; /* Prevent it from taking all space when stacked */
    }

    .search-container {
        position: static; /* Remove absolute positioning on small screens */
        width: 90%; /* Take up more width */
        margin: 10px auto 0 auto; /* Center it below header content */
        order: 3; /* Ensure it appears last in the stacked layout */
        flex-shrink: 1; /* Allow it to shrink if needed */
    }

    #searchInput, #searchResults {
        max-width: 100%; /* Allow elements to stretch on small screens */
    }

    #searchResults {
        width: 100%; /* Adjusted for consistent width on mobile */
        position: static; /* No absolute positioning for results on mobile */
        margin-top: 20px; /* Push results down from search bar */
        border: none; /* Remove borders when static to prevent double borders */
        box-shadow: none; /* Remove shadow to blend better with cards */
        padding: 0; /* Remove padding to better align with cards */
    }

    #searchResults .card {
        margin-bottom: 15px; /* Space between search result cards on mobile */
    }

    #searchResults .card:last-child {
        margin-bottom: 0; /* No margin for the last card */
    }

    .container {
        padding: 20px;
    }
    .card {
        width: 45%;
    }
}

@media screen and (max-width: 480px) {
    .container {
        padding: 15px;
    }
    .card {
        width: 100%;
    }

    h2 {
        font-size: 1.5em;
        margin-bottom: 20px;
    }

    h3 {
        font-size: 1.1em;
    }
}
    </style>
</head>
<body class="theme-blue">
<main>

    <div class="header-container">
        <div class="header-logo">
            <img src="OSCE SPARK.png" alt="OSCE Spark Logo" class="logo">
        </div>
        <div class="header-title">OSCE SPARK</div>

        <div class="search-container">
            <div class="search-input-wrapper">
                <input type="text" id="searchInput" placeholder="Search OSCE topics...">
            </div>
        </div>
    </div>

    <div id="content-display" class="container">
        <div class="card history-taking"><a href="Main Page/pretty_history_taking.html">🧠 History Taking</a></div>
        <div class="card diagnosis"><a href="Main Page/pretty_diagnosis_stations.html">💡 Diagnosis Stations</a></div>
        <div class="card medication"><a href="Main Page/pretty_medication_stations.html">💊 Medication Stations</a></div>
        <div class="card procedure"><a href="Main Page/pretty_procedure_stations.html">🔧 Procedure Stations</a></div>
        <div class="card post-procedure"><a href="Main Page/pretty_post-procedure__stations.html">🔁 Post-Procedure Stations</a></div>
        <div class="card surgery"><a href="Main Page/pretty_surgery_stations.html">🩺 Surgery Stations</a></div>
        <div class="card community"><a href="Main Page/pretty_community_stations.html">🏘️ Community Stations</a></div>
    </div>

</main>
<footer>
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="darkModeToggle">
            <input type="checkbox" id="darkModeToggle" />
            <span class="slider round"></span>
        </label>
    </div>
    Made with ❤️ for OSCE preparation
</footer>


<script>
document.addEventListener('DOMContentLoaded', () => {
    // Dark Mode Toggle Logic
    const darkModeToggle = document.getElementById('darkModeToggle');
    const body = document.body;
    const themeKey = 'theme-preference';

    const applyTheme = (theme) => {
        if (theme === 'dark') {
            body.classList.add('dark-mode');
            if (darkModeToggle) darkModeToggle.checked = true;
        } else {
            body.classList.remove('dark-mode');
            if (darkModeToggle) darkModeToggle.checked = false;
        }
    };

    const savedTheme = localStorage.getItem(themeKey);
    if (savedTheme) {
        applyTheme(savedTheme);
    }

    if (darkModeToggle) {
        darkModeToggle.addEventListener('change', () => {
            const newTheme = darkModeToggle.checked ? 'dark' : 'light';
            applyTheme(newTheme);
            localStorage.setItem(themeKey, newTheme);
        });
    }

    // --- Search Functionality ---
    const searchInput = document.getElementById('searchInput');
    const contentDisplayDiv = document.getElementById('content-display'); // The container that holds either main cards or search results
    const mainCategoryCardsHTML = contentDisplayDiv.innerHTML; // Store initial main category cards HTML

    // Define the category for each subtopic to apply correct border color
    const allSubtopics = [
        [cite_start]// History Taking [cite: 1]
        { title: "Abdominal Pain", url: "Main Page/History Taking/Abdominal Pain.html", categoryClass: "history-taking" },
        { title: "Anxiety", url: "Main Page/History Taking/Anxiety.html", categoryClass: "history-taking" },
        { title: "Breast Lump", url: "Main Page/History Taking/Breast Lump.html", categoryClass: "history-taking" },
        { title: "Cardiovascular", url: "Main Page/History Taking/Cardiovascular.html", categoryClass: "history-taking" },
        { title: "Chest Pain", url: "Main Page/History Taking/Chest Pain.html", categoryClass: "history-taking" },
        { title: "Cough", url: "Main Page/History Taking/Cough.html", categoryClass: "history-taking" },
        { title: "Depression", url: "Main Page/History Taking/Depression.html", categoryClass: "history-taking" },
        { title: "Dizziness History", url: "Main Page/History Taking/Dizziness History.html", categoryClass: "history-taking" },
        { title: "Dysphagia", url: "Main Page/History Taking/Dysphagia.html", categoryClass: "history-taking" },
        { title: "Dyspnoea", url: "Main Page/History Taking/Dyspnoea.html", categoryClass: "history-taking" },
        { title: "Falls", url: "Main Page/History Taking/Falls.html", categoryClass: "history-taking" },
        { title: "Female LUTS", url: "Main Page/History Taking/Female LUTS.html", categoryClass: "history-taking" },
        { title: "Headache", url: "Main Page/History Taking/Headache.html", categoryClass: "history-taking" },
        { title: "Leg Swelling", url: "Main Page/History Taking/Leg Swelling.html", categoryClass: "history-taking" },
        { title: "Loss of Consciousness", url: "Main Page/History Taking/Loss of Consciousness.html", categoryClass: "history-taking" },
        { title: "Male LUTS", url: "Main Page/History Taking/Male LUTS.html", categoryClass: "history-taking" },
        { title: "Ophthalmic", url: "Main Page/History Taking/Ophthalmic.html", categoryClass: "history-taking" },
        { title: "Palpitations", url: "Main Page/History Taking/Palpitations.html", categoryClass: "history-taking" },
        { title: "Respiratory", url: "Main Page/History Taking/Respiratory.html", categoryClass: "history-taking" },
        { title: "Seizure", url: "Main Page/History Taking/Seizure.html", categoryClass: "history-taking" },
        { title: "Stroke-TIA", url: "Main Page/History Taking/Stroke-TIA.html", categoryClass: "history-taking" },
        { title: "Tiredness", url: "Main Page/History Taking/Tiredness.html", categoryClass: "history-taking" },
        { title: "Unintentional Weight Loss", url: "Main Page/History Taking/Unintentional Weight Loss.html", categoryClass: "history-taking" },
        { title: "Urological", url: "Main Page/History Taking/Urological.html", categoryClass: "history-taking" },
        [cite_start]// Community Stations [cite: 1, 2]
        { title: "Alcohol Cessation Counselling", url: "Main Page/pretty_community_stations/alcohol_cessation_counselling.html", categoryClass: "community" },
        { title: "Bowel Cancer Screening", url: "Main Page/pretty_community_stations/bowel_cancer_screening_counselling.html", categoryClass: "community" },
        { title: "Community Blood Pressure Check", url: "Main Page/pretty_community_stations/community_blood_pressure_check.html", categoryClass: "community" },
        { title: "DNACPR Counselling", url: "Main Page/pretty_community_stations/dnacpr_counselling.html", categoryClass: "community" },
        { title: "Hypertension Counselling", url: "Main Page/pretty_community_stations/hypertension_counselling.html", categoryClass: "community" },
        { title: "Inhaler Technique Counselling", url: "Main Page/pretty_community_stations/inhaler_technique_counselling.html", categoryClass: "community" },
        { title: "Peak Flow (PEFR) Technique", url: "Main Page/pretty_community_stations/peak_flow_counselling.html", categoryClass: "community" },
        { title: "Smoking Cessation Counselling", url: "Main Page/pretty_community_stations/smoking_cessation_counselling.html", categoryClass: "community" },
        { title: "Weight Loss Counselling", url: "Main Page/pretty_community_stations/weight_loss_counselling.html", categoryClass: "community" },
        [cite_start]// Diagnosis Stations [cite: 2]
        { title: "Atrial Fibrillation Counselling", url: "Main Page/pretty_diagnosis_stations/atrial_fibrillation_counselling.html", categoryClass: "diagnosis" },
        { title: "Bacterial Vaginosis Counselling", url: "Main Page/pretty_diagnosis_stations/bacterial_vaginosis_counselling.html", categoryClass: "diagnosis" },
        { title: "Chronic Kidney Disease Counselling", url: "Main Page/pretty_diagnosis_stations/chronic_kidney_disease_counselling.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Asthma", url: "Main Page/pretty_diagnosis_stations/explaining_a_diagnosis_of_asthma.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of COPD", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_copd.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Eczema", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_eczema.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Fibroadenoma", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_fibroadenoma.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Glaucoma", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_glaucoma.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Type 1 Diabetes", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_type1_diabetes.html", categoryClass: "diagnosis" },
        { title: "Explaining a Diagnosis of Type 2 Diabetes", url: "Main Page/pretty_diagnosis_stations/explaining_diagnosis_type2_diabetes.html", categoryClass: "diagnosis" },
        [cite_start]// Medication Stations [cite: 2]
        { title: "ACE-Inhibitor Counselling", url: "Main Page/pretty_medication_stations/ace_inhibitor_counselling.html", categoryClass: "medication" },
        { title: "Amitriptyline Counselling", url: "Main Page/pretty_medication_stations/amitriptyline_counselling.html", categoryClass: "medication" },
        { title: "Anticoagulant Counselling | Pharmacy", url: "Main Page/pretty_medication_stations/anticoagulant_counselling_pharmacy.html", categoryClass: "medication" },
        { title: "Asthma Spacer Explanation", url: "Main Page/pretty_medication_stations/asthma_spacer_explanation.html", categoryClass: "medication" },
        { title: "Direct Oral Anticoagulant Counselling", url: "Main Page/pretty_medication_stations/direct_oral_anticoagulant_counselling.html", categoryClass: "medication" },
        { title: "Gliclazide Counselling", url: "Main Page/pretty_medication_stations/gliclazide_counselling.html", categoryClass: "medication" },
        { title: "GTN Spray Counselling", url: "Main Page/pretty_medication_stations/gtn_spray_counselling.html", categoryClass: "medication" },
        { title: "Inhaler Counselling 01 | Pharmacy", url: "Main Page/pretty_medication_stations/inhaler_counselling_01_pharmacy.html", categoryClass: "medication" },
        { title: "Inhaler Counselling 02 | Pharmacy", url: "Main Page/pretty_medication_stations/inhaler_counselling_02_pharmacy.html", categoryClass: "medication" },
        { title: "Insulin Counselling", url: "Main Page/pretty_medication_stations/insulin_counselling.html", categoryClass: "medication" },
        { title: "Iron Supplementation Counselling", url: "Main Page/pretty_medication_stations/iron_supplementation_counselling.html", categoryClass: "medication" },
        { title: "Metformin Counselling", url: "Main Page/pretty_medication_stations/metformin_counselling.html", categoryClass: "medication" },
        { title: "Opioid Analgesia Counselling", url: "Main Page/pretty_medication_stations/opioid_analgesia_counselling.html", categoryClass: "medication" },
        { title: "SSRI Counselling", url: "Main Page/pretty_medication_stations/ssri_counselling.html", categoryClass: "medication" },
        { title: "Statin Counselling", url: "Main Page/pretty_medication_stations/statin_counselling.html", categoryClass: "medication" },
        { title: "Warfarin Counselling", url: "Main Page/pretty_medication_stations/warfarin_counselling.html", categoryClass: "medication" },
        [cite_start]// Post-Procedure Stations [cite: 2]
        { title: "Post-STEMI Counselling", url: "Main Page/pretty_post-procedure__stations/post_stemi_counselling.html", categoryClass: "post-procedure" },
        { title: "Post-stroke Counselling", url: "Main Page/pretty_post-procedure__stations/post_stroke_counselling.html", categoryClass: "post-procedure" },
        [cite_start]// Procedure Stations [cite: 2]
        { title: "Ascitic drain explanation", url: "Main Page/pretty_procedure_stations/ascitic_drain_explanation.html", categoryClass: "procedure" },
        { title: "Blood transfusion counselling", url: "Main Page/pretty_procedure_stations/blood_transfusion_counselling.html", categoryClass: "procedure" },
        { title: "Bronchoscopy Counselling", url: "Main Page/pretty_procedure_stations/bronchoscopy_counselling.html", categoryClass: "procedure" },
        { title: "Chest drain explanation", url: "Main Page/pretty_procedure_stations/chest_drain_explanation.html", categoryClass: "procedure" },
        { title: "Colonoscopy explanation", url: "Main Page/pretty_procedure_stations/colonoscopy_explanation.html", categoryClass: "procedure" },
        { title: "Echocardiogram explanation", url: "Main Page/pretty_procedure_stations/echocardiogram_explanation.html", categoryClass: "procedure" },
        { title: "Endoscopy counselling", url: "Main Page/pretty_procedure_stations/endoscopy_counselling.html", categoryClass: "procedure" },
        { title: "ERCP explanation", url: "Main Page/pretty_procedure_stations/ercp_explanation.html", categoryClass: "procedure" },
        { title: "Haemodialysis Counselling", url: "Main Page/pretty_procedure_stations/haemodialysis_counselling.html", categoryClass: "procedure" },
        { title: "Tuberculosis treatment counselling", url: "Main Page/pretty_procedure_stations/tuberculosis_treatment_counselling.html", categoryClass: "procedure" },
        [cite_start]// Surgery Stations [cite: 2]
        { title: "Appendicectomy Counselling", url: "Main Page/pretty_surgery_stations/appendicectomy_counselling.html", categoryClass: "surgery" },
        { title: "Coronary Artery Bypass Graft (CABG) Counselling", url: "Main Page/pretty_surgery_stations/cabg_counselling.html", categoryClass: "surgery" },
        { title: "Cholecystectomy Counselling", url: "Main Page/pretty_surgery_stations/cholecystectomy_counselling.html", categoryClass: "surgery" },
        { title: "Gastrectomy Counselling", url: "Main Page/pretty_surgery_stations/gastrectomy_counselling.html", categoryClass: "surgery" }
    ];

    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        
        // Clear previous content
        contentDisplayDiv.innerHTML = ''; 

        if (searchTerm.length > 1) { // Only search if more than one character
            const filteredResults = allSubtopics.filter(topic =>
                topic.title.toLowerCase().includes(searchTerm)
            );

            if (filteredResults.length > 0) {
                filteredResults.forEach(topic => {
                    const cardDiv = document.createElement('div');
                    cardDiv.classList.add('card', topic.categoryClass); // Add 'card' and specific category class
                    const a = document.createElement('a');
                    a.href = topic.url;
                    a.textContent = topic.title;
                    cardDiv.appendChild(a);
                    contentDisplayDiv.appendChild(cardDiv);
                });
                contentDisplayDiv.style.display = 'flex'; // Ensure container is visible
            } else {
                const noResultsP = document.createElement('p');
                noResultsP.classList.add('no-results'); // Add a class for specific styling if needed
                noResultsP.textContent = 'No results found.';
                contentDisplayDiv.appendChild(noResultsP);
                contentDisplayDiv.style.display = 'flex'; // Ensure container is visible for message
            }
        } else {
            // If search term is empty, restore original content
            contentDisplayDiv.innerHTML = mainCategoryCardsHTML;
            contentDisplayDiv.style.display = 'flex'; // Ensure container is visible
        }
    });

    // Handle initial state and focus behavior
    searchInput.addEventListener('focus', () => {
        if (searchInput.value.length > 1) {
            searchInput.dispatchEvent(new Event('input')); // Re-trigger search to show results
        }
    });

    // Close search results when clicking outside (and restore main cards)
    document.addEventListener('click', (event) => {
        const targetElement = event.target;
        const isClickInsideSearch = searchInput.contains(targetElement);
        const isClickInsideContentDisplay = contentDisplayDiv.contains(targetElement) && contentDisplayDiv.children.length > 0 && contentDisplayDiv.firstElementChild.classList.contains('card'); // Check if it's a card from results

        // Only hide if clicking outside search input AND outside search results (if they are currently displayed as cards)
        if (!isClickInsideSearch && !isClickInsideContentDisplay && searchInput.value.length > 0) {
             // If there's text in search input but we click outside AND it's not a search result card, clear search and restore
            searchInput.value = ''; // Clear the input
            contentDisplayDiv.innerHTML = mainCategoryCardsHTML; // Restore original content
            contentDisplayDiv.style.display = 'flex';
        } else if (!isClickInsideSearch && searchInput.value.length === 0) {
            // If clicking outside, and search input is already empty, just ensure main cards are shown
            contentDisplayDiv.innerHTML = mainCategoryCardsHTML;
            contentDisplayDiv.style.display = 'flex';
        }
    });

    // Initial load: ensure main cards are visible
    contentDisplayDiv.innerHTML = mainCategoryCardsHTML;
});
</script>
</body>
</html>
